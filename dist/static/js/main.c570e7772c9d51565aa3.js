webpackJsonp([1],{0:function(t,e,i){i("j1ja"),t.exports=i("NHnr")},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s=i("//Fk"),n=i.n(s),r=i("mvHQ"),o=i.n(r),c=i("Dd8w"),l=i.n(c),u=i("fZjL"),d=i.n(u),v=i("y/MS"),f=i.n(v),_=i("4kSj"),h=i.n(_),m=(i("fTMG"),i("TjIa"),i("hsNo"),i("RKAd")),p=i.n(m),g=i("mtWM"),b=i.n(g),k=i("9QV6"),C=i.n(k),w=(i("FNwM"),i("mnbf"),{api:"http://151.80.41.202:7171"});a.a.use(C.a),f.a.setMaxVisible(10);var y=new WebSocket("ws://localhost:7272"),R={name:"App",components:{VueJsonPretty:p.a},data:function(){return{rulesState:{},tokenId:"SEED",confirmationHash:"",triggerContractAddress:"",notificationCount:0,session_id:""+Math.random()}},computed:{rules:function(){return{track_token:{id:"track_token",context:"transaction",rule:"type==2 and contract.asset=='"+this.tokenId+"'",repeat:"always"},confirm_transaction:{id:"confirm_transaction",context:"transaction",rule:"confirmed==true and hash=='"+this.confirmationHash+"'",repeat:"always"},track_triggers:{id:"track_trigger",context:"transaction",rule:"type==31 and contract.contractAddress=='"+this.triggerContractAddress+"'",repeat:"always"}}}},methods:{checkRules:function(){for(var t=this,e=d()(this.rules),i=function(i){var a=e[i],s=t.rules[a];[].push(t.getRule(a).then(function(e){var i="id"in e.data;t.rulesState[a]=l()({},s,{exists:i})}))},a=0;a<e.length;a++)i(a)},addRule:function(t){var e=this,i=this.rules,a=l()({},i[t],{id:t+":"+this.session_id});b.a.post(w.api+"/rule",a).then(function(t){new f.a({type:"success",text:"Rule successfully added !",timeout:1e3}).show(),e.checkRules()})},removeRule:function(t){b.a.delete(w.api+"/rule/"+t+":"+this.session_id).then(function(){new f.a({type:"success",text:"Rule removed !",timeout:1e3}).show()})},getRule:function(t){return b.a.get(w.api+"/rule/"+t+":"+this.session_id)}},created:function(){this.rulesState=l()({},this.rules)},mounted:function(){var t=this;h()(".tabular.menu .item").tab();var e=h()("#table_id").DataTable({order:[[0,"desc"]]});e.on("click","tr",function(){console.log(e.row(this).data())}),setInterval(function(){t.checkRules()},5e3),y.onmessage=function(i){for(var a=JSON.parse(i.data),s=d()(a),n=0;n<s.length;n++){var r=s[n];if(-1!==r.indexOf(":")){var c=r.split(":"),l=c[0];if(c[1]===t.session_id){var u=a[r];e.row.add([t.notificationCount,l,o()(u)]).draw(!1),t.notificationCount++}}}},h()(window).on("beforeunload",function(e){n.a.all([t.removeRule("track_token"),t.removeRule("confirm_transaction"),t.removeRule("track_triggers")])})}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"ui container"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"ui grid"},[i("div",{staticClass:"column"},[i("div",{staticClass:"ui large blue label right floated"},[i("i",{staticClass:"alarm icon"}),t._v("\n        Received notifications\n      "),i("div",{staticClass:"detail"},[t._v(t._s(t.notificationCount))])])])]),t._v(" "),i("div",{staticClass:"ui grid"},[t._m(3),t._v(" "),i("div",{staticClass:"twelve wide stretched column"},[i("div",{staticClass:"ui segment"},[i("div",{staticClass:"ui active tab",attrs:{"data-tab":"track_token"}},[t._m(4),t._v(" "),i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[t._v("Token id")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenId,expression:"tokenId"}],attrs:{type:"text"},domProps:{value:t.tokenId},on:{input:function(e){e.target.composing||(t.tokenId=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Rule specification")]),t._v(" "),i("vue-json-pretty",{attrs:{path:"res",data:t.rules.track_token}})],1),t._v(" "),i("button",{staticClass:"ui green button right floated",class:{disabled:this.rulesState.track_token.exists},attrs:{type:"submit"},on:{click:function(e){t.addRule("track_token")}}},[t._v("Add rule")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:this.rulesState.track_token.exists,expression:"this.rulesState.track_token.exists"}],staticClass:"ui red button right floated",attrs:{type:"submit"},on:{click:function(e){t.removeRule("track_token")}}},[t._v("Remove rule")])])]),t._v(" "),i("div",{staticClass:"ui tab",attrs:{"data-tab":"confirm_transaction"}},[t._m(5),t._v(" "),i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[t._v("Transaction hash")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmationHash,expression:"confirmationHash"}],attrs:{type:"text"},domProps:{value:t.confirmationHash},on:{input:function(e){e.target.composing||(t.confirmationHash=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Rule specification")]),t._v(" "),i("vue-json-pretty",{attrs:{path:"res",data:t.rules.confirm_transaction}})],1),t._v(" "),i("button",{staticClass:"ui green button right floated",class:{disabled:this.rulesState.confirm_transaction.exists},attrs:{type:"submit"},on:{click:function(e){t.addRule("confirm_transaction")}}},[t._v("Add rule")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:this.rulesState.confirm_transaction.exists,expression:"this.rulesState.confirm_transaction.exists"}],staticClass:"ui red button right floated",attrs:{type:"submit"},on:{click:function(e){t.removeRule("confirm_transaction")}}},[t._v("Remove rule")])])]),t._v(" "),i("div",{staticClass:"ui tab",attrs:{"data-tab":"triggers"}},[t._m(6),t._v(" "),i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[t._v("Contract address")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.triggerContractAddress,expression:"triggerContractAddress"}],attrs:{type:"text"},domProps:{value:t.triggerContractAddress},on:{input:function(e){e.target.composing||(t.triggerContractAddress=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"field"},[i("label",[t._v("Rule specification")]),t._v(" "),i("vue-json-pretty",{attrs:{path:"res",data:t.rules.track_triggers}})],1),t._v(" "),i("button",{staticClass:"ui green button right floated",class:{disabled:this.rulesState.track_triggers.exists},attrs:{type:"submit"},on:{click:function(e){t.addRule("track_triggers")}}},[t._v("Add rule")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:this.rulesState.track_triggers.exists,expression:"this.rulesState.track_triggers.exists"}],staticClass:"ui red button right floated",attrs:{type:"submit"},on:{click:function(e){t.removeRule("track_triggers")}}},[t._v("Remove rule")])])])])])])]),t._v(" "),t._m(7)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"ui dividing header"},[e("small",[this._v("TRONHOOK DEMO")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("p",[t._v("Here are some demo of usecases that TronHook can help with. "),i("em",[i("b",[t._v("It is not only limited to these usecase")])]),t._v(", you can write any rule you want that match your requirements.")]),t._v(" "),i("p",[t._v("This demo is focusing on the notification feature but TronHook is not just a notification tool, you can do much more with it !")]),t._v(" "),i("p",[t._v("If you want to have more details about how to write rules, you can check the documentation here.")]),t._v(" "),i("p",[t._v("To start receiving notifications, choose one or multiple rules and save them. TronHook node will start sending notifications via websocket to this page !")]),t._v(" "),i("p",[t._v("Note that this demo checks the matching rules only for the latest blocks, but you can also get notifications for previous blocks or a specific range of blocks.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ui warning message"},[this._v("\n  Rules are deleted every half hour (no matter when you created them) on this demo server, if you are not receiving notifications anymore it might be for this reason."),e("br"),this._v("\n In that case, please reload the page and add your rules again\n")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"four wide column"},[e("b",[this._v("RULE EXAMPLES")]),this._v(" "),e("div",{staticClass:"ui vertical fluid tabular menu"},[e("a",{staticClass:"item active",attrs:{"data-tab":"track_token"}},[this._v("\n        Track transactions of a token\n      ")]),this._v(" "),e("a",{staticClass:"item",attrs:{"data-tab":"confirm_transaction"}},[this._v("\n        Confirmation of a transaction\n      ")]),this._v(" "),e("a",{staticClass:"item ",attrs:{"data-tab":"triggers"}},[this._v("\n        Track triggers of a specific contract\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"ui circle info icon"}),this._v("Receive a notification every time a transaction occurs with a specific token")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"ui circle info icon"}),this._v("Receive a notification only once a specific transaction is confirmed")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"ui circle info icon"}),this._v("Receive a notification every time a triggers occurs on a specific contract")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui container"},[i("h2",{staticClass:"ui dividing header"},[i("a",{attrs:{id:"notifications"}}),i("small",[t._v("Received notifications")])]),t._v(" "),i("table",{staticClass:"ui fixed selectable orange table",attrs:{id:"table_id",width:"100%"}},[i("thead",[i("tr",[i("th",{staticClass:"two wide"},[t._v("#")]),t._v(" "),i("th",{staticClass:"two wide"},[t._v("Rule Id")]),t._v(" "),i("th",{staticClass:"ten wide"},[t._v("Result")])])]),t._v(" "),i("tbody")])])}]};var S=i("VU/8")(R,x,!1,function(t){i("flMy")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:S},template:"<App/>"})},fTMG:function(t,e){},flMy:function(t,e){},hsNo:function(t,e){}},[0]);
//# sourceMappingURL=main.c570e7772c9d51565aa3.js.map